





<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Release Process &mdash; HHB 2.2 documentation</title>
  

  
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/gallery.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/tlcpack_theme.css" type="text/css" />

  
  

  
  
  
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <script type="text/javascript" src="../_static/js/tlcpack_theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    
<header class="header">
    <div class="innercontainer">
      <div class="headerInner d-flex justify-content-between align-items-center">
          <div class="headerLogo">
          </div>

          <div id="headMenu" class="headerNav">
            <button type="button" id="closeHeadMenu" class="navCloseBtn"><img src="../_static/img/close-icon.svg" alt="Close"></button>
             <ul class="nav">
                <li class="nav-item">
                   <a class="nav-link" href=https://www.yuque.com/za4k4z/oxlbxl>Docs</a>
                </li>
             </ul>
          </div>
          </div>
       </div>
    </div>
 </header>
 
    <nav data-toggle="wy-nav-shift" class="wy-nav-side fixed">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="sidetitle" alt="Documentation Home"> HHB
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Reference Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../reference/api/python/index.html">Python API</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      
      <nav class="wy-nav-top" aria-label="top navigation" data-toggle="wy-nav-top">
        
            <div class="togglemenu">

            </div>
            <div class="nav-content">
              <!-- HHB -->
              Table of content
            </div>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        

          




















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> <span class="br-arrow">></span></li>
        
      <li>Release Process</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/contribute/release_process.rst.txt" rel="nofollow"> <img src="../_static//img/source.svg" alt="viewsource"/></a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="release-process">
<span id="id1"></span><h1>Release Process<a class="headerlink" href="#release-process" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#prepare-the-release-notes" id="id2">Prepare the Release Notes</a></p></li>
<li><p><a class="reference internal" href="#prepare-the-gpg-key" id="id3">Prepare the GPG Key</a></p></li>
<li><p><a class="reference internal" href="#cut-a-release-candidate" id="id4">Cut a Release Candidate</a></p></li>
<li><p><a class="reference internal" href="#upload-the-release-candidate" id="id5">Upload the Release Candidate</a></p></li>
<li><p><a class="reference internal" href="#call-a-vote-on-the-release-candidate" id="id6">Call a Vote on the Release Candidate</a></p></li>
<li><p><a class="reference internal" href="#post-the-release" id="id7">Post the Release</a></p></li>
<li><p><a class="reference internal" href="#update-the-tvm-website" id="id8">Update the TVM Website</a></p></li>
<li><p><a class="reference internal" href="#post-the-announcement" id="id9">Post the Announcement</a></p></li>
</ul>
</div>
<p>The release manager role in TVM means you are responsible for a few different things:</p>
<ul class="simple">
<li><p>Preparing release notes</p></li>
<li><p>Preparing your setup</p></li>
<li><p>Preparing for release candidates</p>
<ul>
<li><p>Cutting a release branch</p></li>
<li><p>Informing the community of timing</p></li>
<li><p>Making code changes in that branch with necessary version updates</p></li>
</ul>
</li>
<li><p>Running the voting process for a release</p>
<ul>
<li><p>Creating release candidates</p></li>
<li><p>Calling votes and triaging issues</p></li>
</ul>
</li>
<li><p>Finalizing and posting a release:</p>
<ul>
<li><p>Updating the TVM website</p></li>
<li><p>Finalizing release notes</p></li>
<li><p>Announcing the release</p></li>
</ul>
</li>
</ul>
<div class="section" id="prepare-the-release-notes">
<h2><a class="toc-backref" href="#id2">Prepare the Release Notes</a><a class="headerlink" href="#prepare-the-release-notes" title="Permalink to this headline">¶</a></h2>
<p>Release note contains new features, improvement, bug fixes, known issues and deprecation, etc. TVM provides <a class="reference external" href="https://discuss.tvm.ai/search?q=TVM%20Monthly%20%23Announcement">monthly dev report</a> collects developing progress each month. It could be helpful to who writes the release notes.</p>
<p>It is recommended to open a Github issue to collect feedbacks for the release note draft before cutting the release branch.</p>
</div>
<div class="section" id="prepare-the-gpg-key">
<h2><a class="toc-backref" href="#id3">Prepare the GPG Key</a><a class="headerlink" href="#prepare-the-gpg-key" title="Permalink to this headline">¶</a></h2>
<p>You can skip this section if you have already uploaded your key.</p>
<p>After generating the gpg key, you need to upload your key to a public key server. Please refer to <a class="reference external" href="https://www.apache.org/dev/openpgp.html#generate-key">https://www.apache.org/dev/openpgp.html#generate-key</a> for details.</p>
<p>If you want to do the release on another machine, you can transfer your gpg key to that machine via the <code class="code docutils literal notranslate"><span class="pre">gpg</span> <span class="pre">--export</span></code> and <code class="code docutils literal notranslate"><span class="pre">gpg</span> <span class="pre">--import</span></code> commands.</p>
<p>The last step is to update the KEYS file with your code signing key <a class="reference external" href="https://www.apache.org/dev/openpgp.html#export-public-key">https://www.apache.org/dev/openpgp.html#export-public-key</a>. Check in the changes to the TVM main branch, as well as ASF SVN,</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># the --depth=files will avoid checkout existing folders</span>
svn co --depth<span class="o">=</span>files <span class="s2">&quot;https://dist.apache.org/repos/dist/dev/tvm&quot;</span> svn-tvm
<span class="nb">cd</span> svn-tvm
<span class="c1"># edit KEYS file</span>
svn ci --username <span class="nv">$ASF_USERNAME</span> --password <span class="s2">&quot;</span><span class="nv">$ASF_PASSWORD</span><span class="s2">&quot;</span> -m <span class="s2">&quot;Update KEYS&quot;</span>
<span class="c1"># update downloads.apache.org</span>
svn rm --username <span class="nv">$ASF_USERNAME</span> --password <span class="s2">&quot;</span><span class="nv">$ASF_PASSWORD</span><span class="s2">&quot;</span> https://dist.apache.org/repos/dist/release/tvm/KEYS -m <span class="s2">&quot;Update KEYS&quot;</span>
svn cp --username <span class="nv">$ASF_USERNAME</span> --password <span class="s2">&quot;</span><span class="nv">$ASF_PASSWORD</span><span class="s2">&quot;</span> https://dist.apache.org/repos/dist/dev/tvm/KEYS https://dist.apache.org/repos/dist/release/tvm/ -m <span class="s2">&quot;Update KEYS&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="cut-a-release-candidate">
<h2><a class="toc-backref" href="#id4">Cut a Release Candidate</a><a class="headerlink" href="#cut-a-release-candidate" title="Permalink to this headline">¶</a></h2>
<p>To cut a release candidate, one needs to first cut a branch using selected version string, e.g.,</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git clone https://github.com/apache/tvm.git
<span class="nb">cd</span> tvm/
git branch v0.6.0
git push --set-upstream origin v0.6.0
</pre></div>
</div>
<p>(<em>Make sure the version numbers in the source code are correct.</em> Run <code class="code docutils literal notranslate"><span class="pre">python3</span> <span class="pre">version.py</span></code> to update the version.)</p>
<p>Go to the GitHub repositories “releases” tab and click “Draft a new release”,</p>
<ul class="simple">
<li><p>Provide the release tag in the form of “v1.0.0.rc0” where 0 means it’s the first release candidate</p></li>
<li><p>Select the commit by clicking Target: branch &gt; Recent commits &gt; $commit_hash</p></li>
<li><p>Copy and paste release note draft into the description box</p></li>
<li><p>Select “This is a pre-release”</p></li>
<li><p>Click “Publish release”</p></li>
</ul>
<p>Notice that one can still apply changes to the BRANCH after the cut, while the TAG is fixed. If any change is required for this release, a new TAG has to be created.</p>
<p>Remove previous release candidate (if applied),</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git push --delete origin v0.6.0.rc1
</pre></div>
</div>
<p>Create source code artifacts,</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git clone git@github.com:apache/tvm.git apache-tvm-src-v0.6.0.rc0
<span class="nb">cd</span> apache-tvm-src-v0.6.0.rc0
git checkout v0.6
git submodule update --init --recursive
git checkout v0.6.0.rc0
rm -rf .DS_Store
find . -name <span class="s2">&quot;.git*&quot;</span> -print0 <span class="p">|</span> xargs -0 rm -rf
<span class="nb">cd</span> ..
brew install gnu-tar
gtar -czvf apache-tvm-src-v0.6.0.rc0.tar.gz apache-tvm-src-v0.6.0.rc0
</pre></div>
</div>
<p>Use your GPG key to sign the created artifact. First make sure your GPG is set to use the correct private key,</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ cat ~/.gnupg/gpg.conf
default-key F42xxxxxxxxxxxxxxx
</pre></div>
</div>
<p>Create GPG signature as well as the hash of the file,</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>gpg --armor --output apache-tvm-src-v0.6.0.rc0.tar.gz.asc --detach-sig apache-tvm-src-v0.6.0.rc0.tar.gz
shasum -a <span class="m">512</span> apache-tvm-src-v0.6.0.rc0.tar.gz &gt; apache-tvm-src-v0.6.0.rc0.tar.gz.sha512
</pre></div>
</div>
</div>
<div class="section" id="upload-the-release-candidate">
<h2><a class="toc-backref" href="#id5">Upload the Release Candidate</a><a class="headerlink" href="#upload-the-release-candidate" title="Permalink to this headline">¶</a></h2>
<p>Edit the release page on Github and upload the artifacts created by the previous steps.</p>
<p>The release manager also needs to upload the artifacts to ASF SVN,</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># the --depth=files will avoid checkout existing folders</span>
svn co --depth<span class="o">=</span>files <span class="s2">&quot;https://dist.apache.org/repos/dist/dev/tvm&quot;</span> svn-tvm
<span class="nb">cd</span> svn-tvm
mkdir tvm-v0.6.0-rc0
<span class="c1"># copy files into it</span>
svn add tvm-0.6.0-rc0
svn ci --username <span class="nv">$ASF_USERNAME</span> --password <span class="s2">&quot;</span><span class="nv">$ASF_PASSWORD</span><span class="s2">&quot;</span> -m <span class="s2">&quot;Add RC&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="call-a-vote-on-the-release-candidate">
<h2><a class="toc-backref" href="#id6">Call a Vote on the Release Candidate</a><a class="headerlink" href="#call-a-vote-on-the-release-candidate" title="Permalink to this headline">¶</a></h2>
<p>The first voting takes place on the Apache TVM developers list (<a class="reference external" href="mailto:dev&#37;&#52;&#48;tvm&#46;apache&#46;org">dev<span>&#64;</span>tvm<span>&#46;</span>apache<span>&#46;</span>org</a>). To get more attention, one can create a github issue start with “[VOTE]” instead, it will be mirrored to dev&#64; automatically. Look at past voting threads to see how this proceeds. The email should follow this format.</p>
<ul class="simple">
<li><p>Provide the link to the draft of the release notes in the email</p></li>
<li><p>Provide the link to the release candidate artifacts</p></li>
<li><p>Make sure the email is in text format and the links are correct</p></li>
</ul>
<p>For the dev&#64; vote, there must be at least 3 binding +1 votes and more +1 votes than -1 votes. Once the vote is done, you should also send out a summary email with the totals, with a subject that looks something like [VOTE][RESULT] ….</p>
<p>In ASF, votes are open “at least” 72hrs (3 days). If you don’t get enough number of binding votes within that time, you cannot close the voting deadline. You need to extend it.</p>
<p>If the voting fails, the community needs to modified the release accordingly, create a new release candidate and re-run the voting process.</p>
</div>
<div class="section" id="post-the-release">
<h2><a class="toc-backref" href="#id7">Post the Release</a><a class="headerlink" href="#post-the-release" title="Permalink to this headline">¶</a></h2>
<p>After the vote passes, to upload the binaries to Apache mirrors, you move the binaries from dev directory (this should be where they are voted) to release directory. This “moving” is the only way you can add stuff to the actual release directory. (Note: only PMC can move to release directory)</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">SVN_EDITOR</span><span class="o">=</span>vim
svn mkdir https://dist.apache.org/repos/dist/release/tvm
svn mv https://dist.apache.org/repos/dist/dev/tvm/tvm-v0.6.0-rc2 https://dist.apache.org/repos/dist/release/tvm/tvm-v0.6.0

<span class="c1"># If you&#39;ve added your signing key to the KEYS file, also update the release copy.</span>
svn co --depth<span class="o">=</span>files <span class="s2">&quot;https://dist.apache.org/repos/dist/release/tvm&quot;</span> svn-tvm
curl <span class="s2">&quot;https://dist.apache.org/repos/dist/dev/tvm/KEYS&quot;</span> &gt; svn-tvm/KEYS
<span class="o">(</span><span class="nb">cd</span> svn-tvm <span class="o">&amp;&amp;</span> svn ci --username <span class="nv">$ASF_USERNAME</span> --password <span class="s2">&quot;</span><span class="nv">$ASF_PASSWORD</span><span class="s2">&quot;</span> -m<span class="s2">&quot;Update KEYS&quot;</span><span class="o">)</span>
</pre></div>
</div>
<p>Remember to create a new release TAG (v0.6.0 in this case) on Github and remove the pre-release candidate TAG.</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git push --delete origin v0.6.0.rc2
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="update-the-tvm-website">
<h2><a class="toc-backref" href="#id8">Update the TVM Website</a><a class="headerlink" href="#update-the-tvm-website" title="Permalink to this headline">¶</a></h2>
<p>The website repository is located at <a class="reference external" href="https://github.com/apache/tvm-site">https://github.com/apache/tvm-site</a>. Modify the download page to include the release artifacts as well as the GPG signature and SHA hash.</p>
</div>
<div class="section" id="post-the-announcement">
<h2><a class="toc-backref" href="#id9">Post the Announcement</a><a class="headerlink" href="#post-the-announcement" title="Permalink to this headline">¶</a></h2>
<p>Send out an announcement email to <a class="reference external" href="mailto:announce&#37;&#52;&#48;apache&#46;org">announce<span>&#64;</span>apache<span>&#46;</span>org</a>, and <a class="reference external" href="mailto:dev&#37;&#52;&#48;tvm&#46;apache&#46;org">dev<span>&#64;</span>tvm<span>&#46;</span>apache<span>&#46;</span>org</a>. The announcement should include the link to release note and download page.</p>
</div>
</div>


           </div>
           
          </div>
          

<footer>

<div id="button" class="backtop"><img src="../_static//img/right.svg" alt="backtop"/> </div>
<section class="footerSec">
    <div class="footerHeader">
      <ul class="d-flex align-md-items-center justify-content-between flex-column flex-md-row">
        <li class="copywrite d-flex align-items-center">
          <h5 id="copy-right-info"></h5>
        </li>
      </ul>

    </div>

    <ul>
      <li class="footernote"></li>
    </ul>

</section>
</footer>
        </div>
      </div>

    </section>

  </div>
  

    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

  </body>
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
    <!-- Theme Analytics -->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-75982049-2', 'auto');
    ga('send', 'pageview');
    </script>

    
   

</body>
</html>